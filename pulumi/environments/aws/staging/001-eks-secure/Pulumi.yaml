name: eks-secure-vpc
description: Secure VPC infrastructure for EKS cluster meeting CMMC, CIS, and GDPR compliance standards
runtime: yaml
packages:
  vpc: ../../../../components/aws/vpc@0.0.0
resources:
  aws-provider:
    # Version can be found here: https://github.com/pulumi/pulumi-aws
    type: pulumi:providers:aws
    defaultProvider: true
    options:
      version: 7.9.1
  eks-secure-vpc:
    type: vpc:index:Vpc
    properties:
      vpcCidr: "10.100.0.0/16"
      publicSubnetCidrs:
        - "10.100.1.0/24"
        - "10.100.2.0/24"
        - "10.100.3.0/24"
      privateSubnetCidrs:
        - "10.100.11.0/24"
        - "10.100.12.0/24"
        - "10.100.13.0/24"
      availabilityZones:
        - "us-east-1a"
        - "us-east-1b"
        - "us-east-1c"
      enableNatGateway: true
      vpcName: "eks-secure-vpc"
      tagsAdditional:
        environment: staging
        compliance: "CMMC,CIS,GDPR"
        purpose: "eks-cluster"
        data-classification: "gdpr-capable"
        created_by: pulumi
        github_repository: devops-with-ai
        github_repository_path: "pulumi/environments/aws/staging/001-eks-secure"
outputs:
  vpc_id: ${eks-secure-vpc.vpcId}
  vpc_arn: ${eks-secure-vpc.vpcArn}
  public_subnet_ids: ${eks-secure-vpc.publicSubnetIds}
  private_subnet_ids: ${eks-secure-vpc.privateSubnetIds}
  internet_gateway_id: ${eks-secure-vpc.internetGatewayId}
  nat_gateway_ids: ${eks-secure-vpc.natGatewayIds}
  default_security_group_id: ${eks-secure-vpc.defaultSecurityGroupId}
